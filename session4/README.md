# Create and manage volumes

Volumes are the preferred mechanism for persisting data generated by and used by Docker containers. While bind mounts are dependent on the directory structure of the host machine, volumes are completely managed by Docker. Volumes have several advantages over bind mounts:

Volumes are easier to back up or migrate than bind mounts.
You can manage volumes using Docker CLI commands or the Docker API.
Volumes work on both Linux and Windows containers.
Volumes can be more safely shared among multiple containers.
Volume drivers allow you to store volumes on remote hosts or cloud providers, to encrypt the contents of volumes, or to add other functionality.
A new volumeâ€™s contents can be pre-populated by a container.


# If you need to specify volume driver options, you must use --mount.

-v or --volume: Consists of three fields, separated by colon characters (:). The fields must be in the correct order, and the meaning of each field is not immediately obvious.
In the case of named volumes, the first field is the name of the volume, and is unique on a given host machine. For anonymous volumes, the first field is omitted.
The second field is the path where the file or directory will be mounted in the container.
The third field is optional, and is a comma-separated list of options, such as ro. These options are discussed below.
--mount: Consists of multiple key-value pairs, separated by commas and each consisting of a <key>=<value> tuple. The --mount syntax is more verbose than -v or --volume, but the order of the keys is not significant, and the value of the flag is easier to understand.
The type of the mount, which can be bind, volume, or tmpfs. This topic discusses volumes, so the type will always be volume.
The source of the mount. For named volumes, this is the name of the volume. For anonymous volumes, this field is omitted. May be specified as source or src.
The destination takes as its value the path where the file or directory will be mounted in the container. May be specified as destination, dst, or target.
The readonly option, if present, causes the bind mount to be mounted into the container as read-only.
The volume-opt option, which can be specified more than once, takes a key-value pair consisting of the option name and its value.
The examples below show both the --mount and -v syntax where possible, and --mount is presented first.

Differences between -v and --mount behavior
As opposed to bind mounts, all options for volumes are available for both --mount and -v flags.

When using volumes with services, only --mount is supported.



soooo 

# handling storage 

```
docker volume create my-vol
```

```
 docker volume ls
DRIVER              VOLUME NAME
local               my-vol 
local               0d10322f0f399d8277b786c9704d80f39bf1189aff56bef94668dd7f504e4e23
local               0dce2b92b14bf6d083bb26c1a8f7199803a51c6cbdea796e88b231463272b67e
local               1b602e7c7831b7578eb0e3c082b8df0eee6a5f8bbf050d9c91bcc1df4d934220
```

```
docker volume inspect my-vol
[
    {
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/my-vol/_data",
        "Name": "my-vol",
        "Options": {},
        "Scope": "local"
    }
]
```
# craete docker volume with simple storage located in the local machine

```
docker run -d -it --name storagedocker -v `pwd`/this_is_the_folder_that_we_mount:/mountindocker debian bash
docker ps 
CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS                    NAMES
0a3931e95f36        debian                              "bash"              3 seconds ago       Up 2 seconds                                 storagedocker

docker exec -it storagedocker bash 

root@0a3931e95f36:/# cat mountindocker/thisisonefile
this is file #1
```

# so let's share it with diffrent docker 

```
docker run -it --name sharedcontinderdata  --volumes-from storagedocker debian bash 
root@79c88e396d74:/# ls -la
total 72
drwxr-xr-x   1 root root 4096 May 28 05:06 .
drwxr-xr-x   1 root root 4096 May 28 05:06 ..
-rwxr-xr-x   1 root root    0 May 28 05:06 .dockerenv
drwxr-xr-x   2 root root 4096 May  6 00:00 bin
drwxr-xr-x   2 root root 4096 Mar 28 09:12 boot
drwxr-xr-x   5 root root  360 May 28 05:06 dev
drwxr-xr-x   1 root root 4096 May 28 05:06 etc
drwxr-xr-x   2 root root 4096 Mar 28 09:12 home
drwxr-xr-x   8 root root 4096 May  6 00:00 lib
drwxr-xr-x   2 root root 4096 May  6 00:00 lib64
drwxr-xr-x   2 root root 4096 May  6 00:00 media
drwxr-xr-x   2 root root 4096 May  6 00:00 mnt
drwxr-xr-x   4 root root  128 May 28 04:55 mountindocker
drwxr-xr-x   2 root root 4096 May  6 00:00 opt
dr-xr-xr-x 262 root root    0 May 28 05:06 proc
drwx------   2 root root 4096 May  6 00:00 root
drwxr-xr-x   3 root root 4096 May  6 00:00 run
drwxr-xr-x   2 root root 4096 May  6 00:00 sbin
drwxr-xr-x   2 root root 4096 May  6 00:00 srv
dr-xr-xr-x  13 root root    0 May 28 04:59 sys
drwxrwxrwt   2 root root 4096 May  6 00:00 tmp
drwxr-xr-x  10 root root 4096 May  6 00:00 usr
drwxr-xr-x  11 root root 4096 May  6 00:00 var
root@79c88e396d74:/# cd mountindocker/
root@79c88e396d74:/mountindocker# ls
thisisonefile  thisisonefile2
```
